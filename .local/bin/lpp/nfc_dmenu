#!/bin/sh

### variables ###################

nfcdir="/home/aj/0ForkAlon6/0-nfc/"

#################################



#multiline input text
tmpfile=$(mktemp /tmp/abcnfc.XXXXXX)
st -e nvim $tmpfile #does this close?

sed -i '1 i\---' $tmpfile
sed -i '1 i\ ' $tmpfile

message=$(cat $tmpfile)
rm "$tmpfile"


#what file
file=$(find "$nfcdir" -maxdepth 1 -type f | dmenu -i -l 30)


#categoies?
if grep -q '^"===' $file
then
	category=$(grep '^"===' $file | tr -d '="' | dmenu -i -l 30)
	sed -i "/$category/ a $message" $file
else
	printf "$message" >> $file
fi
